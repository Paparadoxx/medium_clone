import React, { useEffect } from 'react'
import useFetch from 'hooks/useFetch'
import { Link } from 'react-router-dom'

import ErrorMessage from 'components/errorMessage'
import Loading from 'components/loading'

// ["", "", 'HuManIty', 'Gandhi', 'SIDA', 'butt']
// const a = ['', '', '', '', '', '', '', '', '', '', "HuManIty", "Hu‌Man‌Ity", "Gandhi", "HITLER", "SIDA", "BlackLivesMatter", "Black‌Lives‌Matter", "test", "dragons", "butt"]
// console.log(a);
// const resw = a.filter(x => x)
// console.log('с измен', resw);

const PopularTags = () => {
	const [{ response, isLoading, error }, doFetch] = useFetch('/tags')

	useEffect(() => {
		doFetch()
	}, [doFetch])

	if (isLoading || !response) {
		return <Loading />
	}
	if (error) {
		return <ErrorMessage />
	}

	const tagValues = response.tags.slice(-9)

	return (
		<div className='sidebar'>
			<p>Popular tags</p>
			<div className='tag-list'>
				{tagValues.map(tag => (

					<Link to={`/tags/${tag}`}
						className='tag-default tag-pill'
						key={`${tag}`} >
						{tag}
					</Link>
				))}
			</div>
		</div >
	)
}

export default PopularTags